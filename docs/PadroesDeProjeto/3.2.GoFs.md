# 3.2. Módulo Padrões de Projeto GoFs

## Versionamento
| Versão | Alterações                                                                     | Responsável                 | Data       |
| ------ | ------------------------------------------------------------------------------ | --------------------------- | ---------- |
| 0.1    | Adicionado o Gof criacional                                                    | Cibele Goudinho             | 27/07/2022 |
| 0.2    | Adicionado o Gof Estrutural                                                    | Luiz Henrique, Antônio Neto | 28/07/2022 |
| 0.3    | Adicionado o Gof criacional builder                                            | Yan                         | 31/07/2022 |
| 0.4    | Corrigindo erros ortográficos no diagrama Builder e na implementação do código | Yan                         | 01/08/2022 |
| 0.5    | Modelando diagrama e código do GoF Strategy                                    | Victor Buendia              | 02/08/2022 |
| 0.6   | Adicionando introdução e aplicação do GoF Strategy      | Sávio Cunha            | 03/08/2022 |
| 0.7   | Melhorando introdução com base na validação do Victor Buendia      | Yan Andrade           | 05/08/2022 |

## 3.2.1. GoFs Criacionais
<p align="justify">&emsp;&emsp;O GoF criacional tem como objetivo auxiliar e controlar a criação das classes do projeto. Ele possui cinco padrões criacionais documentados: Builder, Abstract Factory, Factory Method, Prototype e Singleton.</p>
No contexto do nosso projeto iremos abordar o **Factory Method** e o **Builder**. 

### 3.2.1.1. Factory Method
<p align="justify">&emsp;&emsp;Esse tipo de GoF criacional permite melhor instanciar as classes concretas e as subclasses. Nesse padrão definimos os seguintes participantes ao aplicá-lo no nosso projeto:</p>

<p align="justify">&emsp;&emsp;Usuario (ex. usuário) - declara o factory method, o qual retorna um objeto do “tipo” Atividade. Usuario pode também definir uma implementação default do factory method que retorna um objeto AtividadeConcreta default. Usuario pode ainda chamar um factory method para criar, deletar ou alterar um objeto de Atividade.</p>

<p align="justify">&emsp;&emsp;UsuarioConcreta (ex. Ong, Doador) – sobrescreve o factory method para retornar uma instância de AtividadeConcreta.</p>

<p align="justify">&emsp;&emsp;Atividade (ex. atividade realizada) - define atributos e métodos, esses últimos abstratos ou programados de forma mais genérica, para um conjunto de objetos, os quais serão criados pelo factory method.</p>

<p align="justify">&emsp;&emsp;AtividadeConcreta (ex. Doação, Ação Social) - estende Atividade, especializando o que foi definido na superclasse.</p>

[Padrão Factory Method](https://lucid.app/lucidchart/fe56ed17-fed3-4432-a859-4811fd0e31fc/edit?beaconFlowId=E4251B866A4ABC99&invitationId=inv_85462122-0db6-4fe8-8a04-ccd5ae61a99b&page=HWEp-vi-RSFO#)

![Factory Method](../imgs/Factory%20Method.jpeg)

_Imagem 1: Factory Method_

#### 3.2.1.1.1. Possível implementação em código

```
class Usuario is

    abstract method createUsuario():Usuario

    

class Ong extends Usuario is
    method createUsuario():Usuario is
        return new Ong()

class Doador extends Usuario is
    method createUsuario():Usuario is
        return new Doador()

method visualizeProfile() is
    profile = this.usuario
    this.reset()
    result profile

method editProfile() is
    profile = this.usuario
    result profile

method deleteProfile() is
    profile = this.usuario
    profile = new profile();

method donate() is
method sugestSocialAction() is
method followOng() is
method visualizeReceivedItens() is
method addSocialAction() is
method completeSocialAction() is
method searchDonations() is

class Atividade is

    abstract method createAtividade():Atividade

class AcaoSocial extends Atividade is
    method createAtividade():Atividade is
        return new AcaoSocial()

class Doacao extends Atividade is
    method createAtividade():Atividade is
        return new Doacao()

class Application is
    field Usuario: Usuario
    field Atividade: Atividade

    method main() is
        

```

### 3.2.1.2. Builder

<p align="justify">&emsp;&emsp;O Builder é um padrão de projeto criacional que permite a você construir objetos complexos passo a passo. O padrão permite que você produza diferentes tipos e representações de um objeto usando o mesmo código de construção.</p>

<p align="justify">&emsp;&emsp;O Builder funciona da seguinte forma. O padrão organiza a construção de objetos em uma série de etapas (No nosso caso, setFotoDePerfil, setNome, setTelefone, etc...). Dessa forma, para criar um objeto você precisará executar uma série de etapas em um objeto builder. O principal ponto que devemos ressaltar aqui é que <b>não</b> precisamos chamar todas etapas, precisamos chamar apenas aquelas etapas que serão necessárias para a produção específica de um objeto.</p>

<p align="justify">&emsp;&emsp;Aplicado no nosso projeto, teremos dois builders concretos um será de Ong e outro para Doador. Teremos também uma interface com todos os métodos de ambas classes concretas. Assim se caso queremos criar um objeto Ong, basta passar NULL nos parâmetros dos métodos que servem para criar um Doador. E para criar um objeto doador devemos fazer o mesmo porém com os métodos que servem para criar Ong.</p>

![Builder](../imgs/Builder.png)
_Imagem 2: Builder_

#### 3.2.1.2.1. Possível implementação em código
````
class Ong is

class Doador is

interface Builder is
    method reset()
    method setFotoDePerfil(Blob)
    method setNome(String)
    method setTelefone(String)
    method setEmail(String)
    method setEndereco(String)
    method setCidade(String)
    method setEstado(String)
    method setCep(String)
    method setSenha(String)
    method setCnpj(String)
    method setNomeDoResponsavel(String)
    method setEmailDoResponsavel(String)
    method setCpf(String)
    method setDataNascimento(Date)   

class OngBuilder implements Builder is
    private field ong:Ong

    constructor OngBuilder() is
        this.reset()

    method reset() is
        this.ong = new Ong()

    method setFotoDePerfil(Blob) is
    method setNome(String) is
    method setTelefone(String) is
    method setEmail(String) is
    method setEndereco(String) is
    method setCidade(String) is
    method setEstado(String) is
    method setCep(String) is
    method setSenha(String) is
    method setCnpj(String) is
    method setNomeDoResponsavel(String) is
    method setEmailDoResponsavel(String) is
    method setCpf(null) is
    method setDataNascimento(null) is 

    method getProduct():Ong is 
        product = this.ong
        this.reset()
        result product

class DoadorBuilder implements Builder is
    private field doador:Doador

    constructor DoadorBuilder() is
        this.reset()

    method reset() is
        this.doador = new Doador()

   method setFotoDePerfil(Blob) is
    method setNome(String) is
    method setTelefone(String) is
    method setEmail(String) is
    method setEndereco(String) is
    method setCidade(String) is
    method setEstado(String) is
    method setCep(String) is
    method setSenha(String) is
    method setCnpj(null) is
    method setNomeDoResponsavel(null) is
    method setEmailDoResponsavel(null) is
    method setCpf(String) is
    method setDataNascimento(Date) is 

    method getProduct():Doador is
        product = this.doador
            this.reset()
            result product

class Director is
    private field builder:Builder

    method setBuilder(builder:Builder)
        this.builder = builder

    method constructOng(builder: Builder) is
        builder.reset()
        builder.setFotoDePerfil(Blob)
        builder.setNome(String)
        builder.setTelefone(String)
        builder.setEmail(String)
        builder.setEndereco(String)
        builder.setCidade(String)
        builder.setEstado(String)
        builder.setCep(String)
        builder.setSenha(String)
        builder.setCnpj(String)
        builder.setEmailDoResponsavel(String)
        builder.setNomeDoResponsavel(String)
        builder.setCpf(null)
        builder.setDataNascimento(null)

    method constructDoador(builder: Builder) is
        builder.reset()
        builder.setFotoDePerfil(Blob)
        builder.setNome(String)
        builder.setTelefone(String)
        builder.setEmail(String)
        builder.setEndereco(String)
        builder.setCidade(String)
        builder.setEstado(String)
        builder.setCep(String)
        builder.setSenha(String)
        builder.setCnpj(null)
        builder.setNomeDoResponsavel(null)
        builder.setEmailDoResponsavel(null)
        builder.setCpf(String)
        builder.setDataNascimento(Date)


class Application is

    method makeOng() is
        director = new Director()

        OngBuilder builder = new OngBuilder()
        director.constructOng(builder)
        Ong ong = builder.getProduct()

        DoadorBuilder builder = new DoaodorBuilder()
        director.constructDoador(builder)
        Doador doador = builder.getProduct()
````

## 3.2.2. GoFs Estruturais

<p align="justify">&emsp;&emsp; Os padrões de projeto estruturais tem como objetivo diminuir o acoplamento entre os objetos de um sistema orientado a objetos. Assim, esses padrões alteram a estrutura, principalmente no nível de classes.</p>

### 3.2.2.1. Composite

<p align="justify">&emsp;&emsp;O padrão composite tem como objetivo compor objetos em estruturas de árvore para representar hierarquias partes/todo. O Composite permite tratar de maneira uniforme objetos individuais e composições de objetivos.</p>

<p align="justify">&emsp;&emsp; Abaixo podemos observar de maneira mais clara a modelagem do padão Composite: </p>

![Builder](../imgs/Composite.png)
_Imagem 3: Composite_

#### 3.2.2.1.1. Possível implementação em código

<p align="justify">&emsp;&emsp; Contexto implementação </p>

```
    Adicionar implemntação
```

### 3.2.2.2. Adapter

<p align="justify">&emsp;&emsp;Em suma, esse padrão Adapter consistem em um adaptador de um objeto para uma interface, tornando  possivel um processo que seria incompatível. Assim tendo como principal objetivo a alteração um objeto permitindo a sua interação com o outro.</p>

<p align="justify">&emsp;&emsp; Abaixo podemos observar de maneira mais clara a modelagem do padão Adapter e seu funcionamento: </p>

![Builder](../imgs/adapter.png)
_Imagem 4: Adapter_


#### 3.2.2.1.1. Possível implementação em código

<p align="justify">&emsp;&emsp; Contexto implementação </p>

```
    Adicionar implemntação
```


## 3.2.3. GoFs Comportamentais

Explicar GoFs comportamentais. Use referências e coloque nas referências no final da página.

### 3.2.3.1 GoF Strategy

#### Introdução

<p align="justify">&emsp;&emsp;O padrão GOF Comportamental Strategy é um padrão de projeto comportamental que permite que você defina uma família de algoritmos, coloque-os em classes separadas, e faça os objetos deles intercambiáveis. Para esse padrão a hierarquia é de suma importância, podendo acontecer com classes abstratas ou interfaces, sendo relações de herança ou realização.</p>

<p align="justify">&emsp;&emsp;Para a implementação do padrão GOF Comportamental Strategy é necessário seguir uma estrutura contendo os seguintes elementos:</p> 

- **Context(Contexto):**  Mantém uma referência para uma das estratégias concretas e se comunica com esse objeto através da interface da estratégia.

- **Strategy(Estratégia):** Declara um método que o contexto usa para executar uma estratégia.
Explicar GoF Strategy. Use referências e coloque nas referências no final da página.

- **ConcreteStrategy:(Estratégia Concreta)** Implementa diferentes variações de um algoritmo que o contexto usa.

<p align="justify">&emsp;&emsp;Esses três elementos formam o GOF Comportamental Strategy como mostra o modelo exemplo abaixo.</p>

![Strategy Modelo](../imgs/ModeloGoFComportamental.png)
_Imagem 5: Modelo do GoF Comportamental Strategy_

#### Aplicação no Projeto

<p align="justify">&emsp;&emsp;O padrão Strategy propõe uma solução que pode ser adotada no cenário desse projeto.</p>

- Quando o cliente acessar a plataforma, é necessário verificar se o mesmo está cadastrado como usuário.

- Caso o cliente não seja cadastrado é necessário executar uma estratégia onde permite ao usuário criar seu próprio perfil, com  a possibilidade de se cadastrar como Doador ou ONG.

- Caso o cliente seja cadastrado, é necessário fazer login como Doador ou ONG.



![Strategy](../imgs/GoFComportamental.png)
_Imagem 6: GoF Strategy no Projeto_

#### Possível Implementação em Código

Explicar como o código tem a ver com a modelagem.

```
import Usuario
import Ong 
import Doador

abstract class Cadastro is
    abstract method cadastrarUsuario(usuario)

class CadastrarOng implements Cadastro is
    // Particularidades da ONG
    private String cnpj
    private String nomeDoResponsavel
    private String emailDoResponsavel
    ...

    cadastrarUsuario(usuario) is
        try:
           // Ler atributos da ONG
            ...
            new Ong( ... )
            return true
        catch Exception:
            return false

class CadastrarDoador implements Cadastro is
    // Particularidades Doador 
    private String cpf 
    private Date dataNascimento

    cadastrarUsuario(usuario) is
        try:
          // Ler atributos do Doador
            ...
            new Doador( ... )
            return true
        catch Exception:
            return false

class Home is
    private tipoCadastro: Cadastro

    method setTipoCadastro(Cadastro tipoCadastro) is
        this.tipoCadastro = tipoCadastro

    method cadastrarUsuario(Usuario usuario) is
        return tipoCadastro.cadastrarUsuario(usuario)

class App is
    method main() is
        Home homePage
        Usuario usuario

        // Cadastro ou Login

        // Login ...

        // Cadastro: Lê se o usuário clicou em cadastrar Ong ou Doador

        if (action == 'ong') then
            homePage.setTipoCadastro(new CadastrarOng())
            homePage.cadastrarUsuario(usuario)

        if (action == 'login') then
            homePage.setStrategy(new CadastrarDoador())
            homePage.cadastrarUsuario(usuario)

        ...
```

## Referências

- GoFs Criacionais. <https://aprender3.unb.br/pluginfile.php/2083414/mod_label/intro/Arquitetura%20e%20Desenho%20de%20Software%20-%20Aula%20GoFs%20Criacionais%20-%20Profa.%20Milene.pdf> Acesso em: 27 de Julho de 2022.

- Introdução aos padrões criacionais. Disponível em: <https://www.devmedia.com.br/introducao-aos-padroes-criacionais-abstract-factory-factory-method-prototype-e-singleton/21249>. Acesso em: 27 de Julho de 2022.

- Factory Method. Disponível em: <https://refactoring.guru/pt-br/design-patterns/factory-method>. Acesso em: 27 de Julho de 2022.

- Factory. Disponível em: <http://www.dsc.ufcg.edu.br/~jacques/cursos/map/html/pat/factory.htm>. Acesso em: 27 de Julho de 2022.

- Arquitetura e Desenho de Software - Aula GoFs Estruturais. Disponível em: <https://aprender3.unb.br/pluginfile.php/2083415/mod_label/intro/Arquitetura%20e%20Desenho%20de%20Software%20-%20Aula%20GoFs%20Estruturais%20-%20Profa.%20Milene.pdf>. Acesso em: 28 de Julho de 2022.

- Builder. Disponível em: <https://refactoring.guru/pt-br/design-patterns/builder>. Acesso em: 31 de Julho de 2022.

- Strategy. Disponível em: <https://refactoring.guru/pt-br/design-patterns/strategy>. Acesso em: 03 de Agosto de 2022. 

- GOF Comportamental: Strategy. XDOCS. Disponível em: <https://xdocs.com.br/doc/gof-comportamental-strategy-grupo-enio-teixeira-maristela-machado-e-thalia-silva-6nw52ydq5qn1>. Acesso em: 03 de Agosto de 2022. 